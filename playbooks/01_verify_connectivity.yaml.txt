---
- name: 01 - Verify connectivity to Cisco routers and switch
  hosts: cisco-routers:cisco-switches
  gather_facts: no

  collections:
    - cisco.ios

  tasks:
    - name: Run a simple command to verify SSH connectivity
      ios_command:
        commands:
          - show clock
      register: clock_output

    - name: Display device reachability and clock
      debug:
        msg: |
          >>> {{ inventory_hostname }} ({{ ansible_host }}) is reachable
          show clock:
          {{ clock_output.stdout[0] }}

    - name: Run basic inventory commands
      ios_command:
        commands:
          - show ip interface brief
          - show version | include uptime
      register: basic_info

    - name: Display IP brief and uptime
      debug:
        msg: |
          ===== {{ inventory_hostname }} ({{ ansible_host }}) =====
          show ip interface brief:
          {{ basic_info.stdout[0] }}

          show version | include uptime:
          {{ basic_info.stdout[1] }}
